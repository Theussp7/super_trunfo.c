#include <stdio.h>
#include <string.h>

// Definição da estrutura da carta
typedef struct {
    char nome[50];
    int populacao;
    float area;
    float pib;
    int pontos_turisticos;
    float densidade_demografica;
} Carta;

// Função para comparar um atributo entre as cartas
float comparar_atributo(int atributo, Carta carta1, Carta carta2) {
    switch (atributo) {
        case 1: // Comparar População
            return carta1.populacao - carta2.populacao;
        case 2: // Comparar Área
            return carta1.area - carta2.area;
        case 3: // Comparar PIB
            return carta1.pib - carta2.pib;
        case 4: // Comparar Pontos Turísticos
            return carta1.pontos_turisticos - carta2.pontos_turisticos;
        case 5: // Comparar Densidade Demográfica
            return carta2.densidade_demografica - carta1.densidade_demografica; // Menor densidade vence
        default:
            return 0;
    }
}

// Função para exibir o menu e capturar a escolha do usuário
void exibir_menu(int atributos_usados[5]) {
    printf("\nEscolha um atributo para a comparação:\n");
    if (atributos_usados[0] == 0) printf("1 - População\n");
    if (atributos_usados[1] == 0) printf("2 - Área\n");
    if (atributos_usados[2] == 0) printf("3 - PIB\n");
    if (atributos_usados[3] == 0) printf("4 - Pontos turísticos\n");
    if (atributos_usados[4] == 0) printf("5 - Densidade Demográfica\n");
    printf("Digite o número da opção desejada: ");
}

// Função para exibir os dados das cartas e resultados da comparação
void exibir_resultado(Carta carta1, Carta carta2, int atributo1, int atributo2, float resultado1, float resultado2, float soma1, float soma2) {
    printf("\nComparação entre %s e %s\n", carta1.nome, carta2.nome);
    printf("Atributo 1: ");
    switch (atributo1) {
        case 1: printf("População\n"); break;
        case 2: printf("Área\n"); break;
        case 3: printf("PIB\n"); break;
        case 4: printf("Pontos turísticos\n"); break;
        case 5: printf("Densidade Demográfica\n"); break;
    }
    printf("%s - Valor: %.2f\n", carta1.nome, resultado1);
    printf("%s - Valor: %.2f\n", carta2.nome, resultado2);
    
    printf("\nAtributo 2: ");
    switch (atributo2) {
        case 1: printf("População\n"); break;
        case 2: printf("Área\n"); break;
        case 3: printf("PIB\n"); break;
        case 4: printf("Pontos turísticos\n"); break;
        case 5: printf("Densidade Demográfica\n"); break;
    }
    printf("%s - Valor: %.2f\n", carta1.nome, resultado1);
    printf("%s - Valor: %.2f\n", carta2.nome, resultado2);
    
    printf("\nSoma dos atributos:\n");
    printf("%s - Soma: %.2f\n", carta1.nome, soma1);
    printf("%s - Soma: %.2f\n", carta2.nome, soma2);
    
    if (soma1 > soma2)
        printf("\nO vencedor é: %s\n", carta1.nome);
    else if (soma2 > soma1)
        printf("\nO vencedor é: %s\n", carta2.nome);
    else
        printf("\nEmpate!\n");
}

int main() {
    // Definição das cartas
    Carta carta1 = {"Brasil", 211049527, 8515767.0, 2055.5, 50, 24.8};
    Carta carta2 = {"Alemanha", 83166711, 357022.0, 3846.2, 75, 232.6};
    
    int atributos_usados[5] = {0, 0, 0, 0, 0}; // Atributos já usados
    int atributo1, atributo2;
    
    // Loop principal para escolher os atributos
    while (1) {
        // Escolha do primeiro atributo
        printf("\nEscolha o primeiro atributo para a comparação:\n");
        exibir_menu(atributos_usados);
        scanf("%d", &atributo1);
        
        // Verificando se a escolha é válida
        if (atributo1 < 1 || atributo1 > 5 || atributos_usados[atributo1 - 1] == 1) {
            printf("Opção inválida ou atributo já escolhido! Tente novamente.\n");
            continue;
        }
        atributos_usados[atributo1 - 1] = 1; // Marca o atributo como escolhido

        // Escolha do segundo atributo
        printf("\nEscolha o segundo atributo para a comparação:\n");
        exibir_menu(atributos_usados);
        scanf("%d", &atributo2);
        
        // Verificando se a escolha é válida
        if (atributo2 < 1 || atributo2 > 5 || atributos_usados[atributo2 - 1] == 1) {
            printf("Opção inválida ou atributo já escolhido! Tente novamente.\n");
            continue;
        }
        atributos_usados[atributo2 - 1] = 1; // Marca o atributo como escolhido
        
        // Comparando os atributos escolhidos
        float resultado1 = comparar_atributo(atributo1, carta1, carta2);
        float resultado2 = comparar_atributo(atributo2, carta1, carta2);

        // Calculando as somas
        float soma1 = resultado1 + resultado2;
        float soma2 = resultado2 + resultado1;

        // Exibindo o resultado
        exibir_resultado(carta1, carta2, atributo1, atributo2, resultado1, resultado2, soma1, soma2);

        // Pergunta se deseja jogar novamente
        printf("\nDeseja jogar novamente? (1 - Sim / 0 - Não): ");
        int opcao;
        scanf("%d", &opcao);
        if (opcao == 0) {
            printf("Saindo do jogo...\n");
            break;
        }

        // Resetando os atributos para permitir nova escolha
        memset(atributos_usados, 0, sizeof(atributos_usados));
    }

    return 0;
}
